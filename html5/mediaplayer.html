<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Media Player</title>
  <script type="text/javascript" src="../js/jquery.js">
  </script>
  <script type="text/javascript">
  /*If you have trouble reading this code, I apologize. I was trying to see how much I
    could do with one-liners in jQuery. The answer: a lot.*/ 
    media = [];
    $(document).ready(function(){
      $.get("media/playlist.json", function(data){
        media = data;
        for(x=0;x<media.length;x++){
          $("#playlist").append($("<li></li>")
            .append($("<a></a>").attr("href","media/"+media[x].filename)
            .attr("id",x).addClass("play").html(media[x].title)));
        }
        $("a.play").click(function(event){
          event.preventDefault();
          x = parseInt(this.id);
          tag = null;
          if(media[x].type === "audio")
            tag = "<audio></audio>";
          else tag = "<video></video>";
          $("#container").empty().append($("<h2>"+media[x].title+"</h2>"))
            .append($(tag).attr("controls","controls")
            .attr("src","media/"+media[x].filename)
	    .attr("autoplay", "autoplay"));
        });
      }, "json");
    });
	</script>
	<style>
	  #playlistpane{
	    float:right;
	    margin:10px;
	    padding:10px;
	    background-color:#ccc;
	  }
	  #container{
	    float:left;
	    margin:20px;
	  }
	</style>
</head>
<body>
  <h1>HTML5 Ajax Media Player</h1>
  <p>A browser-based media player that uses JavaScript, jQuery, and HTML5. If you want to use this on your own music, copy the source of this webpage into a file on your computer. You may also want the <a href="media/playlist.json">JSON File</a> that lists the available media. It is a good example of the file you should create on your own computer.</p>
  <div id="container">
  </div>
  <div id="playlistpane">
    <h2>Playlist:</h2>
    <ul id="playlist">
  </div>
  </ul>
</body>
</html>

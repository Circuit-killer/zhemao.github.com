<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>Snakelegs User Guide</title>

<link href="../../css/blog.css" rel="stylesheet" type="text/css"/>
<link href="../../css/codehilite.css" rel="stylesheet" type="text/css"/>

</head>
<body>
<div id="container">
<header>
<h1></h1>
</header>

<div class="main">
  <div class="block">
    <p><span class="blog_title">Snakelegs User Guide</span>
    <div class="maintext"><h2 id="connecting">Connecting</h2>
<p>Before you can use snakelegs. You will have to open a connection to MongoDB. This can be achieved quite easily with the <code>connect</code> function. Just do:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">snakelegs</span> <span class="kn">import</span> <span class="n">connect</span>

<span class="n">connect</span><span class="p">(</span><span class="s">&#39;mydatabase&#39;</span><span class="p">,</span> <span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">27094</span><span class="p">,</span> <span class="s">&#39;username&#39;</span><span class="p">,</span> <span class="s">&#39;password&#39;</span><span class="p">)</span>
</pre></div>


<p>This will connect to the database "mydatabase" on the MongoDB instance
listening on the port 27094 on localhost. It will also authenticate against
the server with credentials "username" and "password" (this is just an example,
do not actually use those credentials). All of these arguments are optional.
The default database is "snakelegs", the default host is "localhost", and the
default port is the default Mongo port: 27017. Username and password are blank
by default. When they are blank, snakelegs will assume that the Mongo instance
is running in a trusted environment (which is the default if you are running it
on your local machine).</p>
<h2 id="defining_a_document">Defining a Document</h2>
<p>In Snakelegs, a Model (in the MVC sense) is called a Document. You can
represent your data by creating a subclass of Document like so:</p>
<div class="codehilite"><pre><span class="k">class</span> <span class="nc">MyDocument</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
    <span class="n">astring</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">()</span>
    <span class="n">anint</span> <span class="o">=</span> <span class="n">IntField</span><span class="p">()</span>
</pre></div>


<p>That's it. To create a document, just do this:</p>
<div class="codehilite"><pre><span class="n">doc</span> <span class="o">=</span> <span class="n">MyDocument</span><span class="p">(</span><span class="n">astring</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">anint</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<p>Then you can save your document with <code>doc.save()</code>.</p>
<h2 id="finding_documents_in_mongodb">Finding documents in MongoDB</h2>
<p>To query for documents with snakelegs, you can use the <code>find</code> method, which is
a classmethod in the Document class. You can use it like so.</p>
<div class="codehilite"><pre><span class="n">docs</span> <span class="o">=</span> <span class="n">MyDocument</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s">&#39;astring&#39;</span><span class="p">:</span><span class="s">&#39;foo&#39;</span><span class="p">})</span>
</pre></div>


<p>This will return a list of instances of MyDocument that match the query. The query syntax is just the PyMongo query syntax. You should consult the PyMongo manual at [[http://api.mongodb.org/python/]] for more.</p>
<p>If you only want a single result instead of a list, you can use the find_one
classmethod.</p>
<div class="codehilite"><pre><span class="n">doc</span> <span class="o">=</span> <span class="n">MyDocument</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s">&#39;astring&#39;</span><span class="p">:</span><span class="s">&#39;foo&#39;</span><span class="p">})</span>
</pre></div>


<p>This will return the first document that matches the query.</p>
<p>Deleting a document is as easy as saving one. It's just <code>doc.delete()</code>.</p></div>
  </div>
  <p class="date">Created: 2011-04-24</p>
  <p class="date">Last Modified: 2011-04-24</p>
  <p><a href="/blog/">Back to Blog Home</a></p>
  <p><a href="/">Back to Home</a></p>
</div>

</div>
</body>
</html>